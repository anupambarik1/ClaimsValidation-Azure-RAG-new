<div class="claim-form-panel">
  <form [formGroup]="claimForm" (ngSubmit)="submitClaim()">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Policy Number</mat-label>
      <input matInput formControlName="policyNumber" placeholder="POL-2024-12345">
      @if (claimForm.get('policyNumber')?.hasError('required') && claimForm.get('policyNumber')?.touched) {
        <mat-error>Policy number is required</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Policy Type</mat-label>
      <mat-select formControlName="policyType">
        <mat-option value="Motor">Motor</mat-option>
        <mat-option value="Home">Home</mat-option>
        <mat-option value="Health">Health</mat-option>
        <mat-option value="Life">Life</mat-option>
      </mat-select>
      @if (claimForm.get('policyType')?.hasError('required') && claimForm.get('policyType')?.touched) {
        <mat-error>Policy type is required</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Claim Amount</mat-label>
      <input matInput type="number" formControlName="claimAmount" placeholder="5000">
      <span matTextPrefix>$&nbsp;</span>
      @if (claimForm.get('claimAmount')?.hasError('required') && claimForm.get('claimAmount')?.touched) {
        <mat-error>Claim amount is required</mat-error>
      }
      @if (claimForm.get('claimAmount')?.hasError('min')) {
        <mat-error>Amount must be greater than 0</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Claim Description</mat-label>
      <textarea 
        matInput 
        formControlName="claimDescription" 
        rows="4"
        placeholder="Describe the incident and damages..."></textarea>
      @if (claimForm.get('claimDescription')?.hasError('required') && claimForm.get('claimDescription')?.touched) {
        <mat-error>Claim description is required</mat-error>
      }
      @if (claimForm.get('claimDescription')?.hasError('minlength')) {
        <mat-error>Description must be at least 20 characters</mat-error>
      }
      <mat-hint>{{ claimForm.get('claimDescription')?.value?.length || 0 }} / 1000 characters</mat-hint>
    </mat-form-field>

    <div class="actions">
      <button mat-raised-button type="button" (click)="resetForm()">Reset</button>
      <button 
        mat-raised-button 
        color="primary" 
        type="submit"
        [disabled]="claimForm.invalid || isSubmitting">
        @if (isSubmitting) {
          <mat-spinner diameter="20"></mat-spinner>
          Validating...
        } @else {
          Validate Claim
        }
      </button>
    </div>
  </form>
</div>
